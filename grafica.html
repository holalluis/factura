<!doctype html><html><head>
	<meta charset=utf-8>
	<meta name="viewport" content="width=device-width">
	<title>Grafica corba potència</title>
	<style>
		body {background:#eee}
		h1 {
			text-align:center;
		}
		#root {
			display:flex;
			flex-wrap:wrap;
			justify-content:center;
		}
		#input, #graph {
			background:white;
			padding:0.2em;
			border:1px solid #ccc;
			margin:2px;
			text-align:center;
		}
		#graph {
			width:50%;
		}
	</style>
</head><body>
<!--titol--><h1>Grafica corba potència</h1>

<div id=root>

<!--input--> 
<div id=input>
	<div>
		Enganxa (ctrl-v) el text aquí &darr;
	</div>
	<textarea 
		id=dades 
		placeholder="Format corba horària: dd/mm/aaaa hh:MM kW" 
		rows=30 cols=70
>
01/04/2017 00:00 1 kW (estiu=True)
01/04/2017 01:00 2 kW (estiu=True)
01/04/2017 02:00 3 kW (estiu=True)
</textarea>
</div>

<!--grafic--><div id=graph></div>

</div id=root>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
	google.charts.load("current", {packages: ['annotatedtimeline']});
	google.charts.setOnLoadCallback(drawChart);

	function drawChart() {
		var valors=document.querySelector('#input #dades').value
		var linies=valors.split('\n').filter(function(n){return (n!="" && n!=" " && n!="	")});

		//default data
		var DATA=[
			['Temps',            'Potència (kW)'],
			[new Date('2017-01-01 00:00:00'), 20             ],
			[new Date('2017-01-01 01:00:00'), 40             ],
			[new Date('2017-01-01 02:00:00'), 20             ],
		];

		if(linies!=[""])
		{
			
		}

		var data = google.visualization.arrayToDataTable(DATA)

		var options = {
			title: 'Corba horària (kW) vs temps',
			vAxis: {title: 'kW',},
			hAxis: {title: 'Temps',},
			min:0,
			colors:['red','green','blue','yellow','black','pink'],
			legend:"bottom",
		};
		var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('graph'));
		chart.draw(data,options);
	}
</script>
